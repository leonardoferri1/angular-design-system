<div
  class="calendar-overlay"
  (click)="showCalendar = false"
  *ngIf="showCalendar"
></div>
<div class="date-picker-container">
  <div class="date-picker-display" [class]="theme" (click)="toggleCalendar()">
    <div>
      <i class="bi bi-calendar3"></i>
      {{ value ? formatDate(value) : "Select Date" }}
    </div>

    <button
      class="small-dark-button"
      type="button"
      (click)="emitToday(); $event.stopPropagation()"
    >
      Today
    </button>
  </div>

  <div
    class="calendar-popup"
    @modalAnimation
    *ngIf="showCalendar"
    [ngClass]="{ open: showCalendar }"
  >
    <div class="calendar-header">
      <app-year-select
        [(ngModel)]="currentYear"
        [options]="years"
      ></app-year-select>
    </div>

    <div class="calendar-nav">
      <button (click)="prevMonth()" class="month-nav-button" type="button">
        <i class="fa fa-chevron-left" style="margin-right: 2px"></i>
      </button>
      <span>{{ monthsShort[currentMonth] }}</span>
      <button
        type="button"
        (click)="nextMonth()"
        class="month-nav-button"
        [class]="theme + '-button'"
      >
        <i class="fa fa-chevron-right" style="margin-left: 2px"></i>
      </button>
    </div>

    <div class="calendar-columns">
      <div
        class="day-column"
        *ngFor="let column of calendarColumns; let i = index"
      >
        <div class="day header">
          {{ weekdaysShort[i] }}
        </div>
        <div
          class="day"
          *ngFor="let day of column"
          (click)="day && selectDate(day)"
          [ngClass]="{ empty: !day }"
        >
          {{ day?.getDate() }}
        </div>
      </div>
    </div>
  </div>
</div>
